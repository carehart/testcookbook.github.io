
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>CucumberJS + Selenium Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="Cucumber testing suite using Javascript and Selenium Web Driver">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../frisbyjs.html" />
    
    
    <link rel="prev" href="cucumber-+-chai.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Preface</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Common Automation Concepts</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../common-automation-concepts/assumption-styles.html">
            
                <a href="../../common-automation-concepts/assumption-styles.html">
            
                    
                    Assumption Styles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../common-automation-concepts/gherkin.html">
            
                <a href="../../common-automation-concepts/gherkin.html">
            
                    
                    Gherkin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../common-automation-concepts/json-schema.html">
            
                <a href="../../common-automation-concepts/json-schema.html">
            
                    
                    JSON-Schema
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Bash</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../Bash.html">
            
                <a href="../../Bash.html">
            
                    
                    Bash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../shpec-testing.html">
            
                <a href="../../shpec-testing.html">
            
                    
                    SHPEC Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../shpec-and-curl.html">
            
                <a href="../../shpec-and-curl.html">
            
                    
                    SHPEC and Curl
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">C</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../c/unit-test-with-cmocka.html">
            
                <a href="../../c/unit-test-with-cmocka.html">
            
                    
                    Unit Test with CMOCKA
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Clojure</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../clojure/unit-test-with-clojure.html">
            
                <a href="../../clojure/unit-test-with-clojure.html">
            
                    
                    Unit Test with Clojure
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Go</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../../go/test-with-go.html">
            
                <a href="../../go/test-with-go.html">
            
                    
                    Test with Go
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Java</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../../java/intro-to-gradle.html">
            
                <a href="../../java/intro-to-gradle.html">
            
                    
                    Intro to Gradle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../../java/intro-to-maven.html">
            
                <a href="../../java/intro-to-maven.html">
            
                    
                    Intro to Maven
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../../java/junit.html">
            
                <a href="../../java/junit.html">
            
                    
                    JUnit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="../../java/junit/cucumber-and-selenium.html">
            
                <a href="../../java/junit/cucumber-and-selenium.html">
            
                    
                    Cucumber & Selenium
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Javascript</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../first-nodejs-project.html">
            
                <a href="../first-nodejs-project.html">
            
                    
                    First NodeJS Project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="../jasmine.html">
            
                <a href="../jasmine.html">
            
                    
                    Jasmine
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.2.1" data-path="../jasmine/jasmine-within-a-browser.html">
            
                <a href="../jasmine/jasmine-within-a-browser.html">
            
                    
                    Jasmine within a Browser
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="../cucumber-js.html">
            
                <a href="../cucumber-js.html">
            
                    
                    Cucumber JS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.3.1" data-path="cucumber-+-chai.html">
            
                <a href="cucumber-+-chai.html">
            
                    
                    Cucumber + Chai
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="8.3.2" data-path="cucumberjs-+-selenium.html">
            
                <a href="cucumberjs-+-selenium.html">
            
                    
                    CucumberJS + Selenium
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="../frisbyjs.html">
            
                <a href="../frisbyjs.html">
            
                    
                    FrisbyJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.5" data-path="../galen-framework.html">
            
                <a href="../galen-framework.html">
            
                    
                    Galen Framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.6" data-path="../json-schema/tiny-validator.html">
            
                <a href="../json-schema/tiny-validator.html">
            
                    
                    Tiny Validator v4
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">PHP</li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="../../php/phpunit.html">
            
                <a href="../../php/phpunit.html">
            
                    
                    PHPUnit
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1.1" data-path="../../php/phpunit/phpunit-+-selenium.html">
            
                <a href="../../php/phpunit/phpunit-+-selenium.html">
            
                    
                    PHPUnit + Selenium
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Python</li>
        
        
    
        <li class="chapter " data-level="10.1" data-path="../../python/lettuce.html">
            
                <a href="../../python/lettuce.html">
            
                    
                    Lettuce
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1.1" data-path="../../python/lettuce/lettuce-+-selenium.html">
            
                <a href="../../python/lettuce/lettuce-+-selenium.html">
            
                    
                    Lettuce + Selenium
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="../../python/robot-framework.html">
            
                <a href="../../python/robot-framework.html">
            
                    
                    Robot Framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="../../python/json-schema-validation.html">
            
                <a href="../../python/json-schema-validation.html">
            
                    
                    JSON Schema Validation
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Ruby</li>
        
        
    
        <li class="chapter " data-level="11.1" data-path="../../ruby/rspec.html">
            
                <a href="../../ruby/rspec.html">
            
                    
                    RSpec Unit Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.2" data-path="../../ruby/cucumber-+-ruby.html">
            
                <a href="../../ruby/cucumber-+-ruby.html">
            
                    
                    Cucumber + Ruby
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >CucumberJS + Selenium</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="cucumberjs--selenium-web-driver">CucumberJS + Selenium Web Driver</h1>
<h2 id="create-a-cucumberjs-project">Create a CucumberJS project</h2>
<pre><code class="lang-bash"><span class="hljs-comment"># install Cucumber and Selenium webdriver</span>
$ npm install cucumber selenium-webdriver

<span class="hljs-comment"># install browser drivers</span>
$ npm install chromedriver geckodriver

<span class="hljs-comment"># install an assertion tool</span>
$ npm install assert
</code></pre>
<p>If you are using a package.json file you will probably want to save all of these modules to dev dependencies.  to do that when running npm install add a switch --save-dev to the command.</p>
<blockquote>
<p>Another nice thing to do with a package.json file is to add test script.</p>
</blockquote>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;test&quot;</span>: <span class="hljs-string">&quot;./node_modules/.bin/cucumber-js&quot;</span>
  }
}
</code></pre>
<p>With this added to your NPM package file you can run all your cucumber tests by typing in &quot;npm test&quot; on the command line.</p>
<hr>
<h2 id="folder-structure">Folder Structure</h2>
<p>First off we need to create a place for all of our feature files written in<br>Gherkin.  Within this folder you will create files with an extension of feature.<br>For example &quot;testFile.feature&quot;.</p>
<pre><code class="lang-bash">mkdir features
</code></pre>
<p>After creating the features directory we need a place to store our code that runs the features and does the assertions.  We call these step definitions.</p>
<pre><code class="lang-bash"><span class="hljs-built_in">cd</span> features
mkdir step_definitions
</code></pre>
<p>Last but not least we need to create a support directory that handles initializing the World object for Cucumber and other enhancements for Cucumber.</p>
<pre><code class="lang-bash">mkdir support
</code></pre>
<p>Once done you should have a folder stucture like this.</p>
<pre><code>- features
  - step_definitions
  - support
</code></pre><hr>
<h2 id="create-the-cucumber-world">Create the Cucumber World.</h2>
<p>Within the support directory create a file named &quot;world.js&quot;.  In this file we can require some libraries, select browser to test with and set some timeouts.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> seleniumWebdriver = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;selenium-webdriver&apos;</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CustomWorld</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.driver = <span class="hljs-keyword">new</span> seleniumWebdriver.Builder()
                  .forBrowser(<span class="hljs-string">&apos;firefox&apos;</span>)
                  .build();
}

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.World = CustomWorld;

  <span class="hljs-comment">// sets a default timeout to 30 seconds.  Time is in ms.</span>
  <span class="hljs-keyword">this</span>.setDefaultTimeout(<span class="hljs-number">30</span> * <span class="hljs-number">1000</span>);
};
</code></pre>
<hr>
<h2 id="describe-your-behavior">Describe your behavior.</h2>
<p>Create a feature file like &quot;test_cookbook.feature&quot;.  Within the file describe<br>the behavior that you would like.</p>
<pre><code class="lang-Gherkin"><span class="hljs-keyword">Feature</span>: Test Cookbook Home Page

  <span class="hljs-keyword">Scenario</span>: Test Cookbook Title Description
    <span class="hljs-keyword">Given</span> I visit Test Cookbook website
    <span class="hljs-keyword">Then</span> I see title Test Cookbook
</code></pre>
<hr>
<h2 id="define-your-step">Define your step.</h2>
<p>Create a file called &quot;test_cookbook.js&quot; and we can start building our step definitions.</p>
<p>Within the file we first need to setup a javascript module.</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

};
</code></pre>
<p>When you run the tests Cucumber will be looking for regular expression  matching<br>functions to execute. In the feature file the first step we have is a Given<br>statement.</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.Given(<span class="hljs-regexp">/^I visit Test Cookbook website$/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

  });
};
</code></pre>
<p>Now that we have an expression to run, we also need to give it some direction. Lets have it take us to &quot;www.testcookbook.com&quot;.</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.Given(<span class="hljs-regexp">/^I visit Test Cookbook website$/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.driver.get(<span class="hljs-string">&apos;http://www.testcookbook.com&apos;</span>);
  });
};
</code></pre>
<p>If you were to run the tests at this point you should see a browser pop up and goto &quot;www.testcookbook.com&quot;.</p>
<blockquote>
<p>At this point you may still see a browser on the screen.  While starting out its not a big deal to close the window by hand.  However we can add a hooks.js file within the step_definitions folder to handle that for us.</p>
</blockquote>
<pre><code class="lang-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.After(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.driver.quit();
  });
};
</code></pre>
<p>We now have some code in place to take us to a website.  But thats not really testing anything.  If we look back at the feature file we have a validation step that says the title of the page should be &quot;Test Cookbook&quot;.  To accomplish this we need to get the text for the title and assert whether or not it equals the desired outcome.</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.Given(<span class="hljs-regexp">/^I visit Test Cookbook website$/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.driver.get(<span class="hljs-string">&apos;http://www.testcookbook.com&apos;</span>);
  });

  <span class="hljs-keyword">this</span>.Then(<span class="hljs-regexp">/^I see title Test Cookbook$/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.driver.getTitle().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">title</span>) </span>{
      assert.equal(title, <span class="hljs-string">&quot;Test Cookbook&quot;</span>);
      <span class="hljs-keyword">return</span> title;
    });
  });
};
</code></pre>
<p>Now give it a run.</p>
<p>UH OH!!  It didn&apos;t work like expected did it? You probably see something that says &quot;ReferenceError: assert is not defined&quot;. CucumberJS needs an extra library in order to assert or expect specific values.  Luckily this is an easy fix. Provided that you installed the assert package at the beginning all we need to do is require assert.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;assert&apos;</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.Given(<span class="hljs-regexp">/^I visit Test Cookbook website$/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.driver.get(<span class="hljs-string">&apos;http://www.testcookbook.com&apos;</span>);
  });

  <span class="hljs-keyword">this</span>.Then(<span class="hljs-regexp">/^I see title Test Cookbook$/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.driver.getTitle().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">title</span>) </span>{
      assert.equal(title, <span class="hljs-string">&quot;Test Cookbook&quot;</span>);
      <span class="hljs-keyword">return</span> title;
    });
  });
};
</code></pre>
<p>If you run npm test this time you should be able to get some passing tests.</p>
<p>Please note if you are working with Firefox that newer versions will require geckodriver.  If you see firefox open up and never does anything you are more than likely missing that module.</p>
<p>Would you like to pull down a working project?  Look on GitHub.<br><a href="https://github.com/testcookbook/js-cucumber-selenium" target="_blank">https://github.com/testcookbook/js-cucumber-selenium</a></p>
<script src="../../_gitbook_plugin_analytics.js"></script>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="cucumber-+-chai.html" class="navigation navigation-prev " aria-label="Previous page: Cucumber + Chai">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../frisbyjs.html" class="navigation navigation-next " aria-label="Next page: FrisbyJS">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"layout":"default","title":"CucumberJS + Selenium","description":"Cucumber testing suite using Javascript and Selenium Web Driver","level":"8.3.2","depth":2,"next":{"title":"FrisbyJS","level":"8.4","depth":1,"path":"javascript/frisbyjs.md","ref":"javascript/frisbyjs.md","articles":[]},"previous":{"title":"Cucumber + Chai","level":"8.3.1","depth":2,"path":"javascript/cucumber-js/cucumber-+-chai.md","ref":"javascript/cucumber-js/cucumber-+-chai.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["sitemap","analytics"],"pluginsConfig":{"sitemap":{"hostname":"https://www.testcookbook.com"},"analytics":{"context":[{"token":"UA-85156207-1","base":["www.testcookbook.com","testcookbook.com"]}]},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"javascript/cucumber-js/cucumberjs-+-selenium.md","mtime":"2017-05-08T15:15:57.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-05-08T16:33:47.262Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

