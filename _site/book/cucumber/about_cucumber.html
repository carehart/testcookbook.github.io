<!DOCTYPE html>
<html>
  <head>
    <title>About Cucumber</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Getting started with cucumber testing.">
    <link rel="stylesheet" href="/lib/w3.css" />
    <link rel="stylesheet" href="/lib/style.css" />
    <link rel="stylesheet" href="/lib/highlight.css" />
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85156207-1', 'auto');
  ga('send', 'pageview');

</script>

  </head>

  <body>
    <div class="w3-container w3-blue">
      <h1>
        <span class="w3-opennav w3-hide-large w3-hide-medium" onclick="w3_open()">&#9776;</span>
        <a class="w3-btn w3-blue" href="/">Test Cookbook</a>
      </h1>
    </div>
    <div class="w3-row">
      <div class="w3-col m4 l3 w3-green">
        <nav class="w3-sidebar w3-collapse" id="mySidenav">
          <a href="#" onclick="w3_close()" class="w3-btn w3-closenav w3-hide-large w3-hide-medium">Close &times;</a>
          <a href="/blog.html">Blog</a>
<a href="/index.html">Introduction</a>
<a href="" class="w3-pale-blue">Test Strategy - Todo</a>
<!--<a href="/book/table_of_contents.html">Book</a>-->
<span class="tc-menu-label">Testing Frameworks</span>
<div class="tc-indent w3-pale-green">
  <a href="/book/cucumber/about_cucumber.html">Cucumber</a>
  <a href="/book/test_frameworks/gauge/about_gauge.html">Gauge</a>
  <a href="/book/lettuce/about_lettuce.html">Lettuce</a>
  <a href="/book/test_frameworks/jasmine/about_jasmine.html">Jasmine</a>
  <a href="/book/test_frameworks/junit/about_junit.html">JUnit</a>
  <a href="/book/test_frameworks/phpunit/about_phpunit.html">PHPunit</a>
  <a href="/book/test_frameworks/robotframework/about_robot_framework.html">RobotFramework</a>
  <a href="/book/test_frameworks/rspec/about_rspec.html">RSpec</a>
</div>

<span class="tc-menu-label">Web Testing</span>
<div class="tc-indent w3-pale-green">
  <a href="/book/web_testing/java/cucumber_selenium.html">Java JVM Cucumber with Selenium Web Driver</a>
  <a href="/book/web_testing/javascript/cucumberjs-selenium.html">CucumberJS with Selenium Web Driver</a>
  <a href="/book/web_testing/javascript/jasmine_inline_html.html">Jasmine inline with HTML</a>
  <a href="https://github.com/testcookbook/php-phpunit-selenium">PHPunit with Selenium Web Driver</a>
  <a href="https://github.com/testcookbook/python-lettuce-selenium">Python Lettuce with Selenium</a>
  <a href="/book/web_testing/ruby/cucumber-ruby-watir-selenium.html">Ruby Cucumber with Watir and Selenium</a>
</div>

<span class="tc-menu-label">UX and UI Testing</span>
<div class="tc-indent w3-pale-green">
  <a href="/book/test_frameworks/galenframework/about_galen_framework.html">Galen Framework</a>
</div>

<span class="tc-menu-label">Rest API Testing</span>
<div class="tc-indent w3-pale-green">
  <a href="/book/rest/json_schema.html">JSON Schema</a>
</div>


<a href="/book/glossary/glossary.html">Glossary</a>

        </nav>
      </div>
      <div class="w3-col m8 l9">
        <div class="w3-container">
          <h1 id="cucumber">Cucumber</h1>

<p>Cucumber is a behavior driven development test framework.  This framework was
designed to allow for living documentation, business readability, and allow
the team a focus on what the customer wants.</p>

<p>Now imagine you are on a development team creating new application.  You can
grab the 3 amigos (developer, tester, product owner or stake holder).  While
you sit together you talk about what the acceptance criteria is for you
application.  It may take a while for each of the members to agree on what the
scope is but you will get there.  Once you have the criteria you write them
in a format that is both readable to you and the other members of the team.</p>

<h2 id="gherkin">Gherkin</h2>
<hr />
<p>Gherkin is readable formatted file that will allow other members of the team,
to understand what the acceptance criteria is, and also provide that living
documentation of your application.  Once this file or feature is written, you
can run the tests with Cucumber and determine how far along you have come with
a given criteria. For example.</p>

<div class="w3-card">
    <header class="w3-container w3-blue">
      <img alt="file icon image" src="/lib/images/file.png" class="icon" />

      testCookbook.feature
    </header>

    <div class="w3-container">

<figure class="highlight"><pre><code class="language-gherkin" data-lang="gherkin"><span class="kd">Feature</span><span class="p">:</span> Test Cookbook Home Page

  <span class="kn">Scenario</span><span class="p">:</span> Test Cookbook Title Description
    <span class="nf">Given</span> I visit Test Cookbook website
    <span class="nf">Then</span> I see title Test Cookbook</code></pre></figure>

    </div>
</div>

<h2 id="how-to-get-started">How to get started?</h2>
<hr />
<p>Getting started with Cucumber is not usually a complicated feat.  The first step
is picking a programming language that is appropriate for you.  In some cases
this could be a programming language that you are strong in, or in other cases
you might want to integrate the tests within your application suite and use the
same language.</p>

<p>To get started with this example we will use Ruby and layout some basics. A
normal directory setup would look something like.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">.
├── features
│   ├── test1.feature
│   ├── test2.feature
│   ├── step_definitions
│   │   └── steps.rb
│   └── support
│       ├── env.rb
│       └── hooks.rb
└── Gemfile</code></pre></figure>

<p>The features directory would contain your feature files.  These feature files
will be written in a Gherkin style format.</p>

<p>Step definitions will be code that executes the different steps described in the
feature files.  In this case we are making a ‘steps.rb’.  You could name it
anything that is appropriate for you to understand whats in the file.  One nice
thing about using Cucumber for Ruby is that any Ruby file within the
step_definitions can house the definitions.</p>

<p>The support directory should have at least ‘env.rb’.  This file is used to setup
the global configurations for your test suite.  One other thing that we included
in the support directory is the ‘hooks.rb’.  This will allow you to create some
basic steps that could run before or after any given scenario.</p>

<p>The last file you see in the diagram is a Gemfile.  If you are not familiar with
Ruby this is a package file that will help you download the correct gems to run
your test suite.</p>

<p>For this exercise we are going to keep to as close to bare minimal as possible
so that you can learn what is going on.  Once you move to more complicated
scenarios like testing websites with Selenium you will probably want to create
a directory for page objects and flows.  Things that seem repetitive within your
tests your want to use the DRY method when developing.  DRY means don’t repeat
yourself.</p>

<p>Now lets create some directories and try out some Cucumber.  You will also need
Ruby for these examples to work.  If you have never installed or used Ruby,
check out. <a href="https://www.ruby-lang.org/">https://www.ruby-lang.org/</a></p>

<div class="w3-card">
<header class="w3-container w3-grey">
  <img alt="tip image" src="/lib/images/cli.png" class="icon" />

  Command Line - Mac / Linux
</header>

<div class="w3-container">

<figure class="highlight"><pre><code class="language-text" data-lang="text">$ mkdir cucumber
$ cd cucumber
$ gem install cucumber
$ cucumber --init</code></pre></figure>

</div>
</div>

<p>Windows is similar but you need to make sure that your slashes face the right
direction.  The homedir below will be your Windows user name.  You can create
the cucumber directory where ever you would like.  You will also need to make
sure on windows that ‘cucumber’ and ‘gem’ binaries are in your PATH variable.</p>

<div class="w3-card">
<header class="w3-container w3-grey">
  <img alt="tip image" src="/lib/images/cli.png" class="icon" />

  Command Line - Windows
</header>

<div class="w3-container">

<figure class="highlight"><pre><code class="language-text" data-lang="text">C:\Users\homedir&gt; mkdir cucumber
C:\Users\homedir\cucumber&gt; cd cucumber
C:\Users\homedir\cucumber&gt; gem install cucumber
C:\Users\homedir\cucumber&gt; cucumber --init</code></pre></figure>

</div>
</div>

<p>Now create a new file within the features directory called ‘test1.feature’</p>
<div class="w3-card">
<header class="w3-container w3-blue">
  <img alt="file icon image" src="/lib/images/file.png" class="icon" />

  test1.feature
</header>

<div class="w3-container">

<figure class="highlight"><pre><code class="language-gherkin" data-lang="gherkin"><span class="kd">Feature</span><span class="p">:</span> Test 1

  <span class="kn">Scenario</span><span class="p">:</span> Add 2 Numbers
    <span class="nf">Given</span> There are numbers 2 and 3
    <span class="nf">When</span> added together
    <span class="nf">Then</span> they equal 5</code></pre></figure>

</div>
</div>

<p>Lets try running cucumber. You should get an output similar to this below.</p>

<div class="w3-card">
<header class="w3-container w3-grey">
  <img alt="tip image" src="/lib/images/cli.png" class="icon" />

  Command Line
</header>

<div class="w3-container">

<figure class="highlight"><pre><code class="language-text" data-lang="text">$ cucumber

Feature: Test 1

  Scenario: Add 2 Numbers           # features/test1.feature:3
    Given There are numbers 2 and 3 # features/test1.feature:4
    When added together             # features/test1.feature:5
    Then they equal 5               # features/test1.feature:6

1 scenario (1 undefined)
3 steps (3 undefined)
0m0.023s

You can implement step definitions for undefined steps with these snippets:

Given(/^There are numbers (\d+) and (\d+)$/) do |arg1, arg2|
  pending # Write code here that turns the phrase above into concrete actions
end

When(/^added together$/) do
  pending # Write code here that turns the phrase above into concrete actions
end

Then(/^they equal (\d+)$/) do |arg1|
  pending # Write code here that turns the phrase above into concrete actions
end</code></pre></figure>

</div>
</div>

<p>More than likely when you ran cucumber it printed the text above and much of it
should be yellow.  Some terminals may not support ascii color so it might be all
the same color.  The yellow text signifies steps within the defined feature that
are not yet implemented yet.  When using cucumber in Ruby we can actually copy
the suggested code and put them into a ‘steps.rb’ file.</p>

<div class="w3-card">
<header class="w3-container w3-blue">
  <img alt="file icon image" src="/lib/images/file.png" class="icon" />

  steps.rb
</header>

<div class="w3-container">

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Given</span><span class="p">(</span><span class="sr">/^There are numbers (\d+) and (\d+)$/</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="o">|</span>
  <span class="n">pending</span> <span class="c1"># Write code here that turns the phrase above into concrete actions</span>
<span class="k">end</span>

<span class="no">When</span><span class="p">(</span><span class="sr">/^added together$/</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">pending</span> <span class="c1"># Write code here that turns the phrase above into concrete actions</span>
<span class="k">end</span>

<span class="no">Then</span><span class="p">(</span><span class="sr">/^they equal (\d+)$/</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">arg1</span><span class="o">|</span>
  <span class="n">pending</span> <span class="c1"># Write code here that turns the phrase above into concrete actions</span>
<span class="k">end</span></code></pre></figure>

</div>
</div>

<p>Try running cucumber again.</p>

<div class="w3-card">
<header class="w3-container w3-grey">
  <img alt="tip image" src="/lib/images/cli.png" class="icon" />

  Command Line
</header>

<div class="w3-container">

<figure class="highlight"><pre><code class="language-text" data-lang="text">$ cucumber

Feature: Test 1

  Scenario: Add 2 Numbers           # features/test1.feature:3
    Given There are numbers 2 and 3 # features/step_definitions/steps.rb:1
      TODO (Cucumber::Pending)
      ./features/step_definitions/steps.rb:2:in `/^There are numbers (\d+) and (\d+)$/'
      features/test1.feature:4:in `Given There are numbers 2 and 3'
    When added together             # features/step_definitions/steps.rb:5
    Then they equal 5               # features/step_definitions/steps.rb:9

1 scenario (1 pending)
3 steps (2 skipped, 1 pending)
0m0.025s</code></pre></figure>

</div>
</div>

<p>This time when you ran cucumber there were step definitions that have some code
to them.  Each one of the steps was set to just return pending.  If a step
returns pending it will usually be yellow and all the steps below it are a light
blue.  They are blue because they could not be run yet.  The scenario ended
after the first pending.</p>

<p>We need to define some code rather than return pending.  In the first step we
are accepting 2 numbers arg1 and arg2.  For this example we need to make those
numbers accessible to other tests. Lets make the function look like.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Given</span><span class="p">(</span><span class="sr">/^There are numbers (\d+) and (\d+)$/</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="o">|</span>
  <span class="vi">@a</span> <span class="o">=</span> <span class="n">arg1</span><span class="p">.</span><span class="nf">to_i</span>
  <span class="vi">@b</span> <span class="o">=</span> <span class="n">arg2</span><span class="p">.</span><span class="nf">to_i</span>
<span class="k">end</span></code></pre></figure>

<p>You will probably notice the to_i after the arg1 and arg2.  This just changes
the value to be an integer.  The @ sign in front of a and b is significant as
well.  This means those become instance variables and are available across the
class.  If they were without the @ sign we would not be able to access them
in the other steps.</p>

<p>Now when you run cucumber you should get a green line for the first step.  The
closer the color matches to a cucumber the closer you are to success.  Lets go
ahead and fix up the other 2 test definitions.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">When</span><span class="p">(</span><span class="sr">/^added together$/</span><span class="p">)</span> <span class="k">do</span>
  <span class="vi">@total</span><span class="o">=</span><span class="vi">@a</span><span class="o">+</span><span class="vi">@b</span>
<span class="k">end</span>

<span class="no">Then</span><span class="p">(</span><span class="sr">/^they equal (\d+)$/</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">arg1</span><span class="o">|</span>
  <span class="n">assert_equal</span><span class="p">(</span><span class="vi">@total</span><span class="p">,</span> <span class="n">arg1</span><span class="p">.</span><span class="nf">to_i</span><span class="p">)</span>
<span class="k">end</span></code></pre></figure>

<p>Before you decide to run cucumber again we really need to add a small bit of
code to the ‘env.rb’ file.  This file is used to setup the cucumber world or
global settings that you will use within your tests.  For our tests to have a
real value the assert statements need to work.  Otherwise you aren’t really
testing anything.</p>

<div class="w3-card">
<header class="w3-container w3-blue">
  <img alt="file icon image" src="/lib/images/file.png" class="icon" />

  env.rb
</header>

<div class="w3-container">

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">'test/unit/assertions'</span>

<span class="no">World</span><span class="p">(</span><span class="no">Test</span><span class="o">::</span><span class="no">Unit</span><span class="o">::</span><span class="no">Assertions</span><span class="p">)</span></code></pre></figure>

</div>
</div>

<p>Now when you run cucumber you should get all green.</p>

<div class="w3-card">
<header class="w3-container w3-grey">
  <img alt="tip image" src="/lib/images/cli.png" class="icon" />

  Command Line
</header>

<div class="w3-container">

<figure class="highlight"><pre><code class="language-text" data-lang="text">$ cucumber

Feature: Test 1

  Scenario: Add 2 Numbers           # features/test1.feature:3
    Given There are numbers 2 and 3 # features/step_definitions/steps.rb:1
    When added together             # features/step_definitions/steps.rb:6
    Then they equal 5               # features/step_definitions/steps.rb:10

1 scenario (1 passed)
3 steps (3 passed)
0m0.028s</code></pre></figure>

</div>
</div>

<p>Now remember back a short while ago when we said that if we do not assert
anything you are not really testing anything.  All Green tests can be a false
positive, which is something you do not want.  For example in the ‘steps.rb’
file. Put a # sign in front of the assert statement like so.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1">#assert_equal(@total, arg1.to_i)</span></code></pre></figure>

<p>When you run cucumber this time it is still all green.  You could change those
numbers in the previous steps to any number you want.  It will always pass.
Make sure that when you write your tests they provide value and actually assert
for something.</p>

        </div>
      </div>
    </div>
    <script>
function w3_open() {
  document.getElementById("mySidenav").style.display = "block";
}
function w3_close() {
  document.getElementById("mySidenav").style.display = "none";
}
function myAccFunc(id) {
    var x = document.getElementById(id);
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
        x.previousElementSibling.className += " w3-green";
    } else {
        x.className = x.className.replace(" w3-show", "");
        x.previousElementSibling.className =
        x.previousElementSibling.className.replace(" w3-green", "");
    }
}
    </script>
  <br /><br />
  <script id='pp-cfp' data-env='beta' data-token='0500ba510ce50288684513e5494598a81faed684cb49441bb716e20ac72703b5'>(function(d){var s=d.createElement('script'),c=d.createElement('link');s.src='https://beta.prodpad.com/static/js/prodpad-cfp.js';s.async=1;c.href='https://beta.prodpad.com/static/css/prodpad-cfp.css';c.rel='stylesheet';document.head.appendChild(c);document.head.appendChild(s);})(document);</script>
  </body>
</html>
