<!DOCTYPE html>
<html>
  <head>
    <title>Intro to Postman</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="content-language" content="en-us">
    <meta name="description" content="Wait VS Sleep">
    <link rel="stylesheet" href="/lib/w3.css" />
    <link rel="stylesheet" href="/lib/style.css" />
    <link rel="stylesheet" href="/lib/zenburn.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85156207-1', 'auto');
  ga('send', 'pageview');

</script>

    <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Book",
  "url": "http://www.testcookbook.com",
  "name": "Test Cookbook",
  "author": "Ben Harrington",
  "bookFormat": {
  	"@type": "BookFormatType",
  	"name": "Test Cookbook",
    "url": "http://www.testcookbook.com"
  }
}
</script>

  </head>

  <body>
    <div class="w3-container w3-blue">
      <div class="titleHeader">
        <span class="w3-opennav w3-hide-large w3-hide-medium" onclick="w3_open()">
          <i class="fa fa-book" aria-hidden="true"></i>
        </span>
        <!--<span class="w3-opennav w3-hide-large w3-hide-medium" onclick="w3_open()">&#9776;</span>-->
        <a class="w3-btn w3-blue" href="/">
          <i class="fa fa-book w3-hide-small" aria-hidden="true"></i>
          Test Cookbook</a>
      </div>
    </div>
    <div class="w3-row">
      <div class="w3-col m4 l3 w3-green">
        <nav class="w3-sidebar w3-collapse" id="mySidenav">
          <a href="#" onclick="w3_close()" class="w3-btn w3-closenav w3-hide-large w3-hide-medium">Close &times;</a>
          <a href="/news.html">News</a>
<a href="/index.html">Introduction</a>
<a href="/book/programming/clojure">Clojure</a>
<a href="/book/programming/java">Java</a>
<a href="/book/programming/javascript">Javascript</a>
<a href="/book/programming/php">PHP</a>
<a href="/book/programming/python">Python</a>
<a href="/book/programming/ruby">Ruby</a>
<a href="/book/glossary/glossary.html">Glossary</a>

        </nav>
      </div>
      <div class="w3-col m8 l9">
        <div class="w3-container">
          <h1 id="intro-to-postman">Intro to Postman</h1>

<p>Postman is a modern REST api tool. As with most tools and REST clients you can
give it a url and a set of parameters and receive data from an API.  However
Postman also has another thing up its sleeve.  It has the ability to build test
scripts, collections of tests and has a runner.  If these are attractive to
your test environment they also off tools for CI integrations as well.</p>

<p><img src="/lib/images/ic-postman-logo@2x.png" alt="Postman Logo" /></p>

<p>Currently there are a couple of ways to get Postman.  One of those ways is using
Chrome extensions.  However at the current time it is probably best to install
Postman from their website as a native app, as Chrome extensions are going away.
<a href="https://www.getpostman.com/">https://www.getpostman.com/</a></p>

<p><img src="/lib/images/postman/postman-basic-form.png" alt="Postman basic form" /></p>

<p>Now try out your first REST api call.  In the input field where it says ‘Enter
request URL’ put in the url ‘http://www.testcookbook.com/lib/REST/test.json’.
Then hit ‘Send’.</p>

<p><img src="/lib/images/postman/postman-basic-results.png" alt="Postman basic results" /></p>

<h1 id="writing-your-first-test">Writing your first test</h1>

<p>Writing your first test is really simple.  To get started find the Tests link
on right under the input field for the url.</p>

<p><img src="/lib/images/postman/postman-basic-tests.png" alt="Postman basic tests" /></p>

<p>Once you click it you will see a bigger form appear below and also a small
quick snippets reference on the right side.</p>

<div class="w3-panel w3-pale-yellow w3-bottombar w3-topbar w3-border-green">
<i class="fa fa-lightbulb-o" aria-hidden="true"></i>
<!--<img alt="tip image" src="/lib/images/tip100.png" class="icon"/>-->

  Scripts in Postman are written in Javascript.
</div>

<p>Tests in Postman work by setting a field within an array to true or false.  The
name of that field is also the description for the test.</p>
<div class="w3-panel w3-pale-yellow w3-bottombar w3-topbar w3-border-green">
<i class="fa fa-lightbulb-o" aria-hidden="true"></i>
<!--<img alt="tip image" src="/lib/images/tip100.png" class="icon"/>-->

An array will have a format that looks like. tests['some value']
</div>

<p>To start off lets write a simple passing and failing test.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">tests</span><span class="p">[</span><span class="s2">"Pass"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nx">tests</span><span class="p">[</span><span class="s2">"Fail"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</code></pre>
</div>

<p>Now when you click on the send button you should get something that looks like
the image below.</p>

<p><img src="/lib/images/postman/postman-simple-test-results.png" alt="Postman simple test results" /></p>

<h2 id="operators">Operators</h2>

<p>A small segment into a little programming knowledge.  When you actually write
tests later on you will be looking for the result of either a function or some
boolean operator combination to give a result. Some common operators that you
might see that result in a boolean would be.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>| a == b   | returns true if a is equal to b
| a != b   | returns true if a is NOT equal to b
| a === b  | returns true if a is equal to b and the type is the same
| a &lt; b    | returns true if a is less than b
| a &gt; b    | returns true if a is greater than b
| a &lt;= b   | returns true if a is less or equal to b
| a &gt;= b   | returns true if a is greater or equal to b

</code></pre>
</div>

<h2 id="test-response-time">Test Response Time</h2>

<p>So now you know how to assert a passing and failing test lets write a useful
test.  Lets say that we want to make sure that the response time will be less
than 1 second.</p>

<div class="w3-panel w3-pale-yellow w3-bottombar w3-topbar w3-border-green">
<i class="fa fa-lightbulb-o" aria-hidden="true"></i>
<!--<img alt="tip image" src="/lib/images/tip100.png" class="icon"/>-->

Remember that responseTime is actuall measured in milliseconds.  So 1000ms is
equal to 1 sec.
</div>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">tests</span><span class="p">[</span><span class="s2">"Response time &lt; 1 sec"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">responseTime</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span>
</code></pre>
</div>

<h2 id="test-response-body">Test Response Body</h2>

<p>Many times it is the specific body of the response that you would like to test.
Postman has a variable call responseBody that is exposed containing the results
for your api call.  By default that responseBody is a
<a href="/book/glossary/glossary.html#string">string</a>.  In order to process it neatly
like an object we need to convert it into a JSON. We can convert the string to
JSON by using the JSON.parse function.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonData</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">responseBody</span><span class="p">);</span>
</code></pre>
</div>

<p>Once we have created the JSON data then we can make an test for specific data.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">tests</span><span class="p">[</span><span class="s2">"Test Name"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jsonData</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">"John Doe"</span><span class="p">;</span>
</code></pre>
</div>

<h2 id="test-json-schema">Test JSON Schema</h2>

<p>JSON schema is an important tool when validating a REST api with rest.  You can
read more about it in the chapter on <a href="/book/rest/json_schema.html">JSON Schema</a>.
In order to test the JSON to a schema we will need to first create a JSON object
like in the last example.  Then we need to make a variable called schema to
build our JSON requirements in.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonData</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">responseBody</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span>
        <span class="p">}</span>   
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">tests</span><span class="p">[</span><span class="s2">"Valid Schema"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tv4</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">,</span> <span class="nx">schema</span><span class="p">);</span>

<span class="c1">// If you want to look at the console log for what errored out.</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Validation failed: "</span><span class="p">,</span> <span class="nx">tv4</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</code></pre>
</div>

<p>Once you have built your schema you can validate it using Tiny Validator.  Tiny
Validator is included with Postman and assigned to the variable tv4.  To find
more information and other ways to use Tiny Validator check out
<a href="http://geraintluff.github.io/tv4/">http://geraintluff.github.io/tv4/</a>.</p>

<p>Now if you send this query you should notice that there is a failing test.  If
you would like to see why, from the menu bar click View -&gt; Show Postman Console.</p>

<p><img src="/lib/images/postman/postman-console-error.png" alt="Postman console error" /></p>

<p>From looking at the log you will notice that the message is telling us that it
is expecting a number not a string.  Name should actually be a string in this
case.  So in your schema variable change the type for name to string.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span>
        <span class="p">}</span>   
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
</div>

<p>This time when you send the request everything should pass.</p>

<p>Want to come up with even more ways to test.  Check out the other snippets that
are on Postman.</p>

        </div>
      </div>
    </div>
    <script>
function w3_open() {
  document.getElementById("mySidenav").style.display = "block";
}
function w3_close() {
  document.getElementById("mySidenav").style.display = "none";
}
function myAccFunc(id) {
    var x = document.getElementById(id);
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
        x.previousElementSibling.className += " w3-green";
    } else {
        x.className = x.className.replace(" w3-show", "");
        x.previousElementSibling.className =
        x.previousElementSibling.className.replace(" w3-green", "");
    }
}
    </script>
  <br /><br />
  <script id='pp-cfp' data-env='beta' data-token='0500ba510ce50288684513e5494598a81faed684cb49441bb716e20ac72703b5'>(function(d){var s=d.createElement('script'),c=d.createElement('link');s.src='https://beta.prodpad.com/static/js/prodpad-cfp.js';s.async=1;c.href='https://beta.prodpad.com/static/css/prodpad-cfp.css';c.rel='stylesheet';document.head.appendChild(c);document.head.appendChild(s);})(document);</script>
  </body>
</html>
