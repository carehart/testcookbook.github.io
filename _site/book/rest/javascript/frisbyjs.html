<!DOCTYPE html>
<html>
  <head>
    <title>Frisby.js</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="content-language" content="en-us">
    <meta name="description" content="Testing REST services with Frisby.js">
    <link rel="stylesheet" href="/lib/w3.css" />
    <link rel="stylesheet" href="/lib/style.css" />
    <link rel="stylesheet" href="/lib/zenburn.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85156207-1', 'auto');
  ga('send', 'pageview');

</script>

    <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Book",
  "url": "http://www.testcookbook.com",
  "name": "Test Cookbook",
  "author": "Ben Harrington",
  "bookFormat": {
  	"@type": "BookFormatType",
  	"name": "Test Cookbook",
    "url": "http://www.testcookbook.com"
  }
}
</script>

  </head>

  <body>
    <div class="w3-container w3-blue">
      <div class="titleHeader">
        <span class="w3-opennav w3-hide-large w3-hide-medium" onclick="w3_open()">
          <i class="fa fa-book" aria-hidden="true"></i>
        </span>
        <!--<span class="w3-opennav w3-hide-large w3-hide-medium" onclick="w3_open()">&#9776;</span>-->
        <a class="w3-btn w3-blue" href="/">
          <i class="fa fa-book w3-hide-small" aria-hidden="true"></i>
          Test Cookbook</a>
      </div>
    </div>
    <div class="w3-row">
      <div class="w3-col m4 l3 w3-green">
        <nav class="w3-sidebar w3-collapse" id="mySidenav">
          <a href="#" onclick="w3_close()" class="w3-btn w3-closenav w3-hide-large w3-hide-medium">Close &times;</a>
          <a href="/news.html">News</a>
<a href="/index.html">Introduction</a>
<a href="/book/programming/bash">Bash</a>
<a href="/book/programming/c">C</a>
<a href="/book/programming/clojure">Clojure</a>
<a href="/book/programming/java">Java</a>
<a href="/book/programming/javascript">Javascript</a>
<a href="/book/programming/php">PHP</a>
<a href="/book/programming/python">Python</a>
<a href="/book/programming/ruby">Ruby</a>
<a href="/book/glossary/glossary.html">Glossary</a>
<a href="https://docs.google.com/forms/d/e/1FAIpQLSeGwJ-QoKN_QLvGL5VEWP2YJdnRSTuGV3J3JovR42mdEYAndw/viewform">Feedback</a>

        </nav>
      </div>
      <div class="w3-col m8 l9">
        <div class="w3-container">
          <h1 id="testing-rest-services-with-frisbyjs">Testing REST services with Frisby.js</h1>

<p>Frisby is a testing framework for testing a REST api. It has built in matchers
and Jasmine built into its core.  This allows you to have a clean and concise
way to implement and run your tests.</p>

<h2 id="getting-started">Getting Started.</h2>

<p>As with any framework or testing tool that you may use a little setup is
required.  If you haven’t already install NodeJS on your system.  Once that is
installed you can create a basic npm project and install some packages.  If you
have never initialized a npm project. Check out the chapter on <a href="/book/programming/javascript/npm_project.html">Initializing a
NodeJS project.</a></p>

<p>Now you should have a package.json in your test directory similar to the one
above.  Chances are you already have some sort of package json that you could
install packages too.  If so you can skip the init part and start installing
required packages.</p>

<header class="cm1 w3-grey">
  <i class="fa fa-terminal" aria-hidden="true"></i>
<!--<img alt="tip image" src="/lib/images/cli.png" class="icon"/>-->

  Command Line
</header>

<div class="highlighter-rouge"><pre class="highlight"><code>$ npm install --save-dev frisby jasmine-node
$ mkdir specs
</code></pre>
</div>

<div class="w3-panel w3-pale-yellow w3-bottombar w3-topbar w3-border-green">
<i class="fa fa-lightbulb-o" aria-hidden="true"></i>
<!--<img alt="tip image" src="/lib/images/tip100.png" class="icon"/>-->

  On the Frisby.js webpage it says to install jasmine-node like.
  "npm install -g jasmine-node" The -g means global.  This would allow you to
  run jasmine-node from anywhere.  I prefer to put it in the save-dev so that
  all of the packages are contained within the node_modules folder within the
  project.
</div>

<p>Since we installed jasmine-node using the –save-dev flag we should update the
test task on the package json.  This will allow for a clean way to run the tests.</p>

<header class="cm1 w3-blue">
  <!--<img alt="file icon image" src="/lib/images/file.png" class="icon"/>-->
<i class="fa fa-file-code-o" aria-hidden="true"></i>

  steps.py
</header>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index.js"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./node_modules/.bin/jasmine-node specs"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"frisby"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^0.8.5"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"jasmine-node"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^1.14.5"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>You can now run your specs using npm test.</p>

<header class="cm1 w3-grey">
  <i class="fa fa-terminal" aria-hidden="true"></i>
<!--<img alt="tip image" src="/lib/images/cli.png" class="icon"/>-->

  Command Line
</header>

<div class="highlighter-rouge"><pre class="highlight"><code>$ npm test
&gt; test@1.0.0 test /home/ben/exp/test
&gt; jasmine-node specs

Finished in 0.001 seconds
0 tests, 0 assertions, 0 failures, 0 skipped
</code></pre>
</div>

<p>Once you have a basic running test suite its time to write our first spec.</p>

<div class="w3-panel w3-pale-yellow w3-bottombar w3-topbar w3-border-green">
<i class="fa fa-lightbulb-o" aria-hidden="true"></i>
<!--<img alt="tip image" src="/lib/images/tip100.png" class="icon"/>-->

  All spec files must end in "spec.js" like "test_spec.js" or "yourTestspec.js"
</div>

<h2 id="your-first-spec">Your first spec</h2>

<header class="cm1 w3-blue">
  <!--<img alt="file icon image" src="/lib/images/file.png" class="icon"/>-->
<i class="fa fa-file-code-o" aria-hidden="true"></i>

  first_spec.js
</header>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">frisby</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'frisby'</span><span class="p">);</span>
<span class="nx">frisby</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'Get Brightbit Twitter feed'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'http://www.testcookbook.com/lib/REST/test.json'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">expectStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="p">.</span><span class="nx">toss</span><span class="p">();</span>
</code></pre>
</div>

<p>Now try running your tests with “npm test”</p>

<header class="cm1 w3-grey">
  <i class="fa fa-terminal" aria-hidden="true"></i>
<!--<img alt="tip image" src="/lib/images/cli.png" class="icon"/>-->

  Command Line
</header>

<div class="highlighter-rouge"><pre class="highlight"><code>$ npm test

&gt; test@1.0.0 test /home/ben/exp/test
&gt; jasmine-node specs

.

Finished in 0.452 seconds
1 test, 1 assertion, 0 failures, 0 skipped
</code></pre>
</div>

        </div>
      </div>
    </div>
    <script>
function w3_open() {
  document.getElementById("mySidenav").style.display = "block";
}
function w3_close() {
  document.getElementById("mySidenav").style.display = "none";
}
function myAccFunc(id) {
    var x = document.getElementById(id);
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
        x.previousElementSibling.className += " w3-green";
    } else {
        x.className = x.className.replace(" w3-show", "");
        x.previousElementSibling.className =
        x.previousElementSibling.className.replace(" w3-green", "");
    }
}
    </script>
  </body>
</html>
