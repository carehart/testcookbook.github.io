<!DOCTYPE html>
<html>
  <head>
    <title>JSON Schema</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="content-language" content="en-us">
    <meta name="description" content="Introduction to JSON schema.">
    <link rel="stylesheet" href="/lib/w3.css" />
    <link rel="stylesheet" href="/lib/style.css" />
    <link rel="stylesheet" href="/lib/zenburn.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85156207-1', 'auto');
  ga('send', 'pageview');

</script>

    <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Book",
  "url": "http://www.testcookbook.com",
  "name": "Test Cookbook",
  "author": "Ben Harrington",
  "bookFormat": {
  	"@type": "BookFormatType",
  	"name": "Test Cookbook",
    "url": "http://www.testcookbook.com"
  }
}
</script>

  </head>

  <body>
    <div class="w3-container w3-blue">
      <div class="titleHeader">
        <span class="w3-opennav w3-hide-large w3-hide-medium" onclick="w3_open()">
          <i class="fa fa-book" aria-hidden="true"></i>
        </span>
        <!--<span class="w3-opennav w3-hide-large w3-hide-medium" onclick="w3_open()">&#9776;</span>-->
        <a class="w3-btn w3-blue" href="/">
          <i class="fa fa-book w3-hide-small" aria-hidden="true"></i>
          Test Cookbook</a>
      </div>
    </div>
    <div class="w3-row">
      <div class="w3-col m4 l3 w3-green">
        <nav class="w3-sidebar w3-collapse" id="mySidenav">
          <a href="#" onclick="w3_close()" class="w3-btn w3-closenav w3-hide-large w3-hide-medium">Close &times;</a>
          <a href="/news.html">News</a>
<a href="/index.html">Introduction</a>
<a href="/book/programming/clojure">Clojure</a>
<a href="/book/programming/java">Java</a>
<a href="/book/programming/javascript">Javascript</a>
<a href="/book/programming/php">PHP</a>
<a href="/book/programming/python">Python</a>
<a href="/book/programming/ruby">Ruby</a>
<a href="/book/glossary/glossary.html">Glossary</a>
<a href="https://docs.google.com/forms/d/e/1FAIpQLSeGwJ-QoKN_QLvGL5VEWP2YJdnRSTuGV3J3JovR42mdEYAndw/viewform">Feedback</a>

        </nav>
      </div>
      <div class="w3-col m8 l9">
        <div class="w3-container">
          <h1 id="json-schema">JSON Schema</h1>

<p>JSON schema is a tool or document that provides a definition to a JSON document.
With a JSON schema you can validate and define what you can send or receive.
This is especially useful when you are working with a 3rd party as a consumer or
a provider.</p>

<p>From a testing perspective a JSON schema gives us a clear way to understand and
validate responses, while at the same time we can also validate things that we
mock. I know what you might be thinking.  You mean we can test the things we are
testing with. To some degree yes.  From experience when I have worked on
projects where things are rapidly changing it can be hard to really understand
what changed and what tests I might need to adapt.  However using a JSON schema
can potentially help resolve finding some direction.</p>

<p>Now to start off we really need to build the most basic JSON schema that we can
come up with.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>It sure doesn’t look like much does it.  In reality it isn’t much.  It is just
an empty object in JSON format.  JSON schema itself is a JSON document.  Lets
try to make that schema a little more useful.  Lets say we need to get a JSON
response from the Telephone company, that contains a first name, last name, and
a telephone number. An example response is.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(555)-888-5555"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Our schema for this would look like.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Telephone company response"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Awesome now we could validate our response from the Telephone company and test
that it is what it should be.  One thing to know about JSON schema is you can
also make certain things required or very strict if needed.  In this current
example for instance if the response didn’t return a phoneNumber, then the
schema still passes.  However if the phone number came back as a 5558885555,
then it would have failed saying something like output was not a string.</p>

<p>Lets assume though that we have to have all 3 of those fields.  To do that we
can add one simple statement to the JSON schema.  Required.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Telephone company response"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"firstName"</span><span class="p">,</span><span class="w"> </span><span class="s2">"lastName"</span><span class="p">,</span><span class="w"> </span><span class="s2">"phoneNumber"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Now if the Telephone company sends a response without firstName, lastName, or
phoneNumber the schema will be invalid.</p>

<p>As you can see a JSON schema can be a valuable tool to both yourself and those
you may have to work with.  I would recommend that if you are working with other
providers or consumers that you provide the schema or ask for one.  These make
excellent contracts to work with and can ease communications during discussions.</p>

        </div>
      </div>
    </div>
    <script>
function w3_open() {
  document.getElementById("mySidenav").style.display = "block";
}
function w3_close() {
  document.getElementById("mySidenav").style.display = "none";
}
function myAccFunc(id) {
    var x = document.getElementById(id);
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
        x.previousElementSibling.className += " w3-green";
    } else {
        x.className = x.className.replace(" w3-show", "");
        x.previousElementSibling.className =
        x.previousElementSibling.className.replace(" w3-green", "");
    }
}
    </script>
  </body>
</html>
