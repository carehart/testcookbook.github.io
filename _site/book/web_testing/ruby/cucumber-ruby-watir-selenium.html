<!DOCTYPE html>
<html>
  <head>
    <title>Cucumber using Ruby and Watir</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="content-language" content="en-us">
    <meta name="description" content="Cucumber Ruby and Watir implementation.">
    <link rel="stylesheet" href="/lib/w3.css" />
    <link rel="stylesheet" href="/lib/style.css" />
    <link rel="stylesheet" href="/lib/zenburn.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85156207-1', 'auto');
  ga('send', 'pageview');

</script>

    <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Book",
  "url": "http://www.testcookbook.com",
  "name": "Test Cookbook",
  "author": "Ben Harrington",
  "bookFormat": {
  	"@type": "BookFormatType",
  	"name": "Test Cookbook",
    "url": "http://www.testcookbook.com"
  }
}
</script>

  </head>

  <body>
    <div class="w3-container w3-blue">
      <div class="titleHeader">
        <span class="w3-opennav w3-hide-large w3-hide-medium" onclick="w3_open()">
          <i class="fa fa-book" aria-hidden="true"></i>
        </span>
        <!--<span class="w3-opennav w3-hide-large w3-hide-medium" onclick="w3_open()">&#9776;</span>-->
        <a class="w3-btn w3-blue" href="/">
          <i class="fa fa-book w3-hide-small" aria-hidden="true"></i>
          Test Cookbook</a>
      </div>
    </div>
    <div class="w3-row">
      <div class="w3-col m4 l3 w3-green">
        <nav class="w3-sidebar w3-collapse" id="mySidenav">
          <a href="#" onclick="w3_close()" class="w3-btn w3-closenav w3-hide-large w3-hide-medium">Close &times;</a>
          <a href="/news.html">News</a>
<a href="/index.html">Introduction</a>
<a href="/book/programming/bash">Bash</a>
<a href="/book/programming/c">C</a>
<a href="/book/programming/clojure">Clojure</a>
<a href="/book/programming/java">Java</a>
<a href="/book/programming/javascript">Javascript</a>
<a href="/book/programming/php">PHP</a>
<a href="/book/programming/python">Python</a>
<a href="/book/programming/ruby">Ruby</a>
<a href="/book/glossary/glossary.html">Glossary</a>
<a href="https://docs.google.com/forms/d/e/1FAIpQLSeGwJ-QoKN_QLvGL5VEWP2YJdnRSTuGV3J3JovR42mdEYAndw/viewform">Feedback</a>

        </nav>
      </div>
      <div class="w3-col m8 l9">
        <div class="w3-container">
          <h1 id="cucumber-using-ruby-and-watir">Cucumber using Ruby and Watir</h1>

<p>Cucumber with Ruby I believe is one of the easiest forms of behavior test
automation.  Getting started we first need a basic directory structure.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>- features
  - support
  - step_definitions
</code></pre>
</div>

<p>Once you have created your directory structure you will need to create a
Gemfile.  If you are unfamiliar with Ruby a Gemfile holds the names and versions
of packages that can be downloaded to allow your project to work.</p>

<header class="cm1 w3-blue">
  <!--<img alt="file icon image" src="/lib/images/file.png" class="icon"/>-->
<i class="fa fa-file-code-o" aria-hidden="true"></i>

  Gemfile
</header>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">source</span> <span class="s1">'https://rubygems.org'</span>

<span class="n">gem</span> <span class="s1">'cucumber'</span>
<span class="n">gem</span> <span class="s1">'rspec-expectations'</span>
<span class="n">gem</span> <span class="s1">'watir-webdriver'</span>
<span class="n">gem</span> <span class="s1">'selenium-webdriver'</span>
</code></pre>
</div>

<p>To install all the needed packages you can now do the following on the command
line.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;header class="cm1 w3-grey"&gt;
  &lt;i class="fa fa-terminal" aria-hidden="true"&gt;&lt;/i&gt; &lt;!--&lt;img alt="tip image" src="/lib/images/cli.png" class="icon"/&gt;--&gt;

  Command Line
&lt;/header&gt;
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>gem install bundler
bundle install
</code></pre>
</div>

<p>Now we need to setup an environment for cucumber.  To do this you can create a
‘env.rb’ file in the support directory.  This file will become more useful for
different configuration items later on.  For now we just need a small bit of
code.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;header class="cm1 w3-blue"&gt;
  &lt;!--&lt;img alt="file icon image" src="/lib/images/file.png" class="icon"/&gt;--&gt; &lt;i class="fa fa-file-code-o" aria-hidden="true"&gt;&lt;/i&gt;

  env.rb
&lt;/header&gt;
</code></pre>
</div>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'watir-webdriver'</span>
</code></pre>
</div>

<p>If you have done everything right you should have the basic structure for a
cucumber test suite.  It should run however you do not have an tests just yet.
Lets create a new feature file called ‘testCookbook.feature’.</p>
<header class="cm1 w3-blue">
  <!--<img alt="file icon image" src="/lib/images/file.png" class="icon"/>-->
<i class="fa fa-file-code-o" aria-hidden="true"></i>

  testCookbook.feature
</header>
<div class="language-gherkin highlighter-rouge"><pre class="highlight"><code><span class="kd">Feature</span><span class="p">:</span> Test Cookbook Home Page

  <span class="kn">Scenario</span><span class="p">:</span> Test Cookbook Title Description
    <span class="nf">Given</span> I visit Test Cookbook website
    <span class="nf">Then</span> I see title Test Cookbook
</code></pre>
</div>

<p>Now try running your cucumber suite.  To do so run the command below on the
command line.  When it runs you should see some yellow text showing that you
need step definitions.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;header class="cm1 w3-grey"&gt;
  &lt;i class="fa fa-terminal" aria-hidden="true"&gt;&lt;/i&gt; &lt;!--&lt;img alt="tip image" src="/lib/images/cli.png" class="icon"/&gt;--&gt;

  Command Line
&lt;/header&gt;
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>bundle exec cucumber
</code></pre>
</div>

<p>Building step definitions can be done by copying the template in yellow from the
command line or building your own regular expression definition to match. For
this example create a file called steps.rb in the step_definitions directory.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;header class="cm1 w3-blue"&gt;
  &lt;!--&lt;img alt="file icon image" src="/lib/images/file.png" class="icon"/&gt;--&gt; &lt;i class="fa fa-file-code-o" aria-hidden="true"&gt;&lt;/i&gt;

  steps.rb
&lt;/header&gt;
</code></pre>
</div>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Given</span><span class="p">(</span><span class="sr">/^I visit Test Cookbook website$/</span><span class="p">)</span> <span class="k">do</span>
  <span class="vi">@browser</span><span class="p">.</span><span class="nf">goto</span> <span class="s1">'http://www.testcookbook.com'</span>
<span class="k">end</span>

<span class="no">Then</span><span class="p">(</span><span class="sr">/^I see title Test Cookbook$/</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="vi">@browser</span><span class="p">.</span><span class="nf">title</span><span class="p">).</span><span class="nf">to</span> <span class="n">eq</span><span class="p">(</span><span class="s2">"Test Cookbook"</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Now try running one more time.  This time you should see some errors.  We need
to build us some small hooks that will take care of setup and teardown of the
browser.  Lets make a new file in the support directory called ‘hooks.rb’.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;header class="cm1 w3-blue"&gt;
&lt;!--&lt;img alt="file icon image" src="/lib/images/file.png" class="icon"/&gt;--&gt; &lt;i class="fa fa-file-code-o" aria-hidden="true"&gt;&lt;/i&gt;

  hooks.rb
&lt;/header&gt;
</code></pre>
</div>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Before</span> <span class="k">do</span>
  <span class="vi">@browser</span> <span class="o">=</span> <span class="no">Watir</span><span class="o">::</span><span class="no">Browser</span><span class="p">.</span><span class="nf">new</span>
<span class="k">end</span>

<span class="no">After</span> <span class="k">do</span>
  <span class="vi">@browser</span><span class="p">.</span><span class="nf">close</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Last try and this time it should work.  Run your Cucumber suite and you should
start seeing the feature file you wrote in a bright green.  If there was
something wrong you will get text in red.  The goal is to make all the tests
look the color of a cucumber.</p>

        </div>
      </div>
    </div>
    <script>
function w3_open() {
  document.getElementById("mySidenav").style.display = "block";
}
function w3_close() {
  document.getElementById("mySidenav").style.display = "none";
}
function myAccFunc(id) {
    var x = document.getElementById(id);
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
        x.previousElementSibling.className += " w3-green";
    } else {
        x.className = x.className.replace(" w3-show", "");
        x.previousElementSibling.className =
        x.previousElementSibling.className.replace(" w3-green", "");
    }
}
    </script>
  </body>
</html>
