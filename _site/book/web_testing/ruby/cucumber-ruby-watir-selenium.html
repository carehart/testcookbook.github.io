<!DOCTYPE html>
<html>
  <head>
    <title>Cucumber using Ruby and Watir</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Cucumber Ruby and Watir implementation.">
    <link rel="stylesheet" href="/lib/w3.css" />
    <link rel="stylesheet" href="/lib/style.css" />
    <link rel="stylesheet" href="/lib/highlight.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85156207-1', 'auto');
  ga('send', 'pageview');

</script>

  </head>

  <body>
    <div class="w3-container w3-blue">
      <h1>
        <span class="w3-opennav w3-hide-large w3-hide-medium" onclick="w3_open()">&#9776;</span>
        <a class="w3-btn w3-blue" href="/">Test Cookbook</a>
      </h1>
    </div>
    <div class="w3-row">
      <div class="w3-col m4 l3 w3-green">
        <nav class="w3-sidebar w3-collapse" id="mySidenav">
          <a href="#" onclick="w3_close()" class="w3-btn w3-closenav w3-hide-large w3-hide-medium">Close &times;</a>
          <a href="/blog.html">Blog</a>
<a href="/index.html">Introduction</a>
<a href="" class="w3-pale-blue">Test Strategy - Todo</a>
<!--<a href="/book/table_of_contents.html">Book</a>-->
<span class="tc-menu-label">Testing Frameworks</span>
<div class="tc-indent w3-pale-green">
  <a href="/book/cucumber/about_cucumber.html">Cucumber</a>
  <a href="/book/test_frameworks/gauge/about_gauge.html">Gauge</a>
  <a href="/book/lettuce/about_lettuce.html">Lettuce</a>
  <a href="/book/test_frameworks/jasmine/about_jasmine.html">Jasmine</a>
  <a href="/book/test_frameworks/junit/about_junit.html">JUnit</a>
  <a href="/book/test_frameworks/phpunit/about_phpunit.html">PHPunit</a>
  <a href="/book/test_frameworks/robotframework/about_robot_framework.html">RobotFramework</a>
  <a href="/book/test_frameworks/rspec/about_rspec.html">RSpec</a>
</div>

<span class="tc-menu-label">Web Testing</span>
<div class="tc-indent w3-pale-green">
  <a href="/book/web_testing/java/cucumber_selenium.html">Java JVM Cucumber with Selenium Web Driver</a>
  <a href="/book/web_testing/javascript/cucumberjs-selenium.html">CucumberJS with Selenium Web Driver</a>
  <a href="/book/web_testing/javascript/jasmine_inline_html.html">Jasmine inline with HTML</a>
  <a href="https://github.com/testcookbook/php-phpunit-selenium">PHPunit with Selenium Web Driver</a>
  <a href="https://github.com/testcookbook/python-lettuce-selenium">Python Lettuce with Selenium</a>
  <a href="/book/web_testing/ruby/cucumber-ruby-watir-selenium.html">Ruby Cucumber with Watir and Selenium</a>
</div>

<span class="tc-menu-label">UX and UI Testing</span>
<div class="tc-indent w3-pale-green">
  <a href="/book/test_frameworks/galenframework/about_galen_framework.html">Galen Framework</a>
</div>

<span class="tc-menu-label">Rest API Testing</span>
<div class="tc-indent w3-pale-green">
  <a href="/book/rest/json_schema.html">JSON Schema</a>
  <a href="/book/rest/ruby/validate_json_ruby.html">Validating JSON with Ruby</a>
</div>


<a href="/book/glossary/glossary.html">Glossary</a>

        </nav>
      </div>
      <div class="w3-col m8 l9">
        <div class="w3-container">
          <h1 id="cucumber-using-ruby-and-watir">Cucumber using Ruby and Watir</h1>

<p>Cucumber with Ruby I believe is one of the easiest forms of behavior test
automation.  Getting started we first need a basic directory structure.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">- features
  - support
  - step_definitions</code></pre></figure>

<p>Once you have created your directory structure you will need to create a
Gemfile.  If you are unfamiliar with Ruby a Gemfile holds the names and versions
of packages that can be downloaded to allow your project to work.</p>

<div class="w3-card">
    <header class="w3-container w3-blue">
      <!--<img alt="file icon image" src="/lib/images/file.png" class="icon"/>-->
<i class="fa fa-file-code-o" aria-hidden="true"></i>

      Gemfile
    </header>

    <div class="w3-container">

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">source</span> <span class="s1">'https://rubygems.org'</span>

<span class="n">gem</span> <span class="s1">'cucumber'</span>
<span class="n">gem</span> <span class="s1">'rspec-expectations'</span>
<span class="n">gem</span> <span class="s1">'watir-webdriver'</span>
<span class="n">gem</span> <span class="s1">'selenium-webdriver'</span></code></pre></figure>

    </div>
</div>

<p>To install all the needed packages you can now do the following on the command
line.</p>

<div class="w3-card">
    <header class="w3-container w3-grey">
      <i class="fa fa-terminal" aria-hidden="true"></i>
<!--<img alt="tip image" src="/lib/images/cli.png" class="icon"/>-->

      Command Line
    </header>

    <div class="w3-container">

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">gem install bundler
bundle install</code></pre></figure>

    </div>
</div>

<p>Now we need to setup an environment for cucumber.  To do this you can create a
‘env.rb’ file in the support directory.  This file will become more useful for
different configuration items later on.  For now we just need a small bit of
code.</p>
<div class="w3-card">
    <header class="w3-container w3-blue">
      <!--<img alt="file icon image" src="/lib/images/file.png" class="icon"/>-->
<i class="fa fa-file-code-o" aria-hidden="true"></i>

      env.rb
    </header>

    <div class="w3-container">

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">'watir-webdriver'</span></code></pre></figure>

    </div>
</div>

<p>If you have done everything right you should have the basic structure for a
cucumber test suite.  It should run however you do not have an tests just yet.
Lets create a new feature file called ‘testCookbook.feature’.</p>
<div class="w3-card">
    <header class="w3-container w3-blue">
      <!--<img alt="file icon image" src="/lib/images/file.png" class="icon"/>-->
<i class="fa fa-file-code-o" aria-hidden="true"></i>

      testCookbook.feature
    </header>

    <div class="w3-container">

<figure class="highlight"><pre><code class="language-gherkin" data-lang="gherkin"><span class="kd">Feature</span><span class="p">:</span> Test Cookbook Home Page

  <span class="kn">Scenario</span><span class="p">:</span> Test Cookbook Title Description
    <span class="nf">Given</span> I visit Test Cookbook website
    <span class="nf">Then</span> I see title Test Cookbook</code></pre></figure>

    </div>
</div>

<p>Now try running your cucumber suite.  To do so run the command below on the
command line.  When it runs you should see some yellow text showing that you
need step definitions.</p>

<div class="w3-card">
    <header class="w3-container w3-grey">
      <i class="fa fa-terminal" aria-hidden="true"></i>
<!--<img alt="tip image" src="/lib/images/cli.png" class="icon"/>-->

      Command Line
    </header>

    <div class="w3-container">

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">bundle <span class="nb">exec </span>cucumber</code></pre></figure>

    </div>
</div>

<p>Building step definitions can be done by copying the template in yellow from the
command line or building your own regular expression definition to match. For
this example create a file called steps.rb in the step_definitions directory.</p>

<div class="w3-card">
    <header class="w3-container w3-blue">
      <!--<img alt="file icon image" src="/lib/images/file.png" class="icon"/>-->
<i class="fa fa-file-code-o" aria-hidden="true"></i>

      steps.rb
    </header>

    <div class="w3-container">

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Given</span><span class="p">(</span><span class="sr">/^I visit Test Cookbook website$/</span><span class="p">)</span> <span class="k">do</span>
  <span class="vi">@browser</span><span class="p">.</span><span class="nf">goto</span> <span class="s1">'http://www.testcookbook.com'</span>
<span class="k">end</span>

<span class="no">Then</span><span class="p">(</span><span class="sr">/^I see title Test Cookbook$/</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="vi">@browser</span><span class="p">.</span><span class="nf">title</span><span class="p">).</span><span class="nf">to</span> <span class="n">eq</span><span class="p">(</span><span class="s2">"Test Cookbook"</span><span class="p">)</span>
<span class="k">end</span></code></pre></figure>

    </div>
</div>

<p>Now try running one more time.  This time you should see some errors.  We need
to build us some small hooks that will take care of setup and teardown of the
browser.  Lets make a new file in the support directory called ‘hooks.rb’.</p>

<div class="w3-card">
    <header class="w3-container w3-blue">
    <!--<img alt="file icon image" src="/lib/images/file.png" class="icon"/>-->
<i class="fa fa-file-code-o" aria-hidden="true"></i>

      hooks.rb
    </header>

    <div class="w3-container">

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Before</span> <span class="k">do</span>
  <span class="vi">@browser</span> <span class="o">=</span> <span class="no">Watir</span><span class="o">::</span><span class="no">Browser</span><span class="p">.</span><span class="nf">new</span>
<span class="k">end</span>

<span class="no">After</span> <span class="k">do</span>
  <span class="vi">@browser</span><span class="p">.</span><span class="nf">close</span>
<span class="k">end</span></code></pre></figure>

    </div>
</div>

<p>Last try and this time it should work.  Run your Cucumber suite and you should
start seeing the feature file you wrote in a bright green.  If there was
something wrong you will get text in red.  The goal is to make all the tests
look the color of a cucumber.</p>

        </div>
      </div>
    </div>
    <script>
function w3_open() {
  document.getElementById("mySidenav").style.display = "block";
}
function w3_close() {
  document.getElementById("mySidenav").style.display = "none";
}
function myAccFunc(id) {
    var x = document.getElementById(id);
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
        x.previousElementSibling.className += " w3-green";
    } else {
        x.className = x.className.replace(" w3-show", "");
        x.previousElementSibling.className =
        x.previousElementSibling.className.replace(" w3-green", "");
    }
}
    </script>
  <br /><br />
  <script id='pp-cfp' data-env='beta' data-token='0500ba510ce50288684513e5494598a81faed684cb49441bb716e20ac72703b5'>(function(d){var s=d.createElement('script'),c=d.createElement('link');s.src='https://beta.prodpad.com/static/js/prodpad-cfp.js';s.async=1;c.href='https://beta.prodpad.com/static/css/prodpad-cfp.css';c.rel='stylesheet';document.head.appendChild(c);document.head.appendChild(s);})(document);</script>
  </body>
</html>
